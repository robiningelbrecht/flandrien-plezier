<html class=" scroll-smooth" lang="en">
<head>
    <title>Flandrienplezier</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width">
    <link rel="icon" type="image/png" href="/logo.png"/>
    <link href="/css/style.min.css" rel="stylesheet">
</head>
<body class="bg-gray-50">
<nav class="bg-white border-b border-gray-200 px-4 py-2.5 fixed left-0 right-0 top-0 z-1100">
    <div class="flex items-center gap-x-2.5">
        <button data-drawer-target="drawer-navigation" data-drawer-toggle="drawer-navigation"
                aria-controls="drawer-navigation"
                class="p-2 text-gray-600 rounded-lg cursor-pointer md:hidden hover:text-gray-900 hover:bg-gray-100 focus:bg-gray-100 focus:ring-2 focus:ring-gray-100">
            <svg aria-hidden="true" class="w-6 h-6" fill="currentColor" viewBox="0 0 20 20"
                 xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd"
                      d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h6a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z"
                      clip-rule="evenodd"></path>
            </svg>
            <svg aria-hidden="true" class="hidden w-6 h-6" fill="currentColor" viewBox="0 0 20 20"
                 xmlns="http://www.w3.org/2000/svg">
                <path fill-rule="evenodd"
                      d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z"
                      clip-rule="evenodd"></path>
            </svg>
            <span class="sr-only">{{ "Toggle sidebar"|trans }}</span>
        </button>
        <img src="logo.png" class="rounded-sm h-8" alt="Flandriens Logo">
        <div>
            <div class="text-lg md:text-2xl font-semibold whitespace-nowrap">
                Flandrienplezier
            </div>
            <div class="text-sm font-normal leading-3 whitespace-nowrap">Zijn we d'r al?</div>
        </div>
    </div>
</nav>
<aside class="fixed top-0 left-0 w-64 h-screen pt-14 transition-transform -translate-x-full bg-white border-r border-gray-200 md:translate-x-0 z-1001"
       aria-label="Sidenav" id="drawer-navigation">
    <div class="py-5 px-3 h-full bg-white divide-y divide-gray-100">
        <ul class="space-y-2 mb-2">
            <li>
                <a href="#anchor-challenge-2025"
                   class="flex items-center p-2 text-base font-medium text-gray-900 rounded-lg hover:bg-gray-100 aria-selected:bg-gray-100 group">
                    <svg class="w-6 h-6 text-gray-500 transition duration-75 group-hover:text-gray-900"
                         xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none">
                        <path d="M12 8V12L15 15" stroke="currentColor" stroke-width="2" stroke-linecap="round"></path>
                        <circle cx="12" cy="12" r="9" stroke="currentColor" stroke-width="2"></circle>
                    </svg>
                    <span class="ml-3">Challenge 2025</span>
                </a>
            </li>
            <li>
                <a href="#anchor-challenge-2025-personal"
                   class="flex items-center p-2 text-base font-medium text-gray-900 rounded-lg hover:bg-gray-100 aria-selected:bg-gray-100 group">
                    <svg class="w-6 h-6 text-gray-500 transition duration-75 group-hover:text-gray-900"
                         viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <g stroke-width="0"></g>
                        <g stroke-linecap="round" stroke-linejoin="round"></g>
                        <g>
                            <path d="M12 14V17M12 14C9.58104 14 7.56329 12.2822 7.10002 10M12 14C14.419 14 16.4367 12.2822 16.9 10M17 5H19.75C19.9823 5 20.0985 5 20.1951 5.01921C20.5918 5.09812 20.9019 5.40822 20.9808 5.80491C21 5.90151 21 6.01767 21 6.25C21 6.94698 21 7.29547 20.9424 7.58527C20.7056 8.77534 19.7753 9.70564 18.5853 9.94236C18.2955 10 17.947 10 17.25 10H17H16.9M7 5H4.25C4.01767 5 3.90151 5 3.80491 5.01921C3.40822 5.09812 3.09812 5.40822 3.01921 5.80491C3 5.90151 3 6.01767 3 6.25C3 6.94698 3 7.29547 3.05764 7.58527C3.29436 8.77534 4.22466 9.70564 5.41473 9.94236C5.70453 10 6.05302 10 6.75 10H7H7.10002M12 17C12.93 17 13.395 17 13.7765 17.1022C14.8117 17.3796 15.6204 18.1883 15.8978 19.2235C16 19.605 16 20.07 16 21H8C8 20.07 8 19.605 8.10222 19.2235C8.37962 18.1883 9.18827 17.3796 10.2235 17.1022C10.605 17 11.07 17 12 17ZM7.10002 10C7.03443 9.67689 7 9.34247 7 9V4.57143C7 4.03831 7 3.77176 7.09903 3.56612C7.19732 3.36201 7.36201 3.19732 7.56612 3.09903C7.77176 3 8.03831 3 8.57143 3H15.4286C15.9617 3 16.2282 3 16.4339 3.09903C16.638 3.19732 16.8027 3.36201 16.901 3.56612C17 3.77176 17 4.03831 17 4.57143V9C17 9.34247 16.9656 9.67689 16.9 10"
                                  stroke="currentColor" stroke-width="2" stroke-linecap="round"
                                  stroke-linejoin="round"></path>
                        </g>
                    </svg>
                    <span class="ml-3">2025 - Personal</span>
                </a>
            </li>
            <li>
                <a href="#anchor-challenge-2024"
                   class="flex items-center p-2 text-base font-medium text-gray-900 rounded-lg hover:bg-gray-100 aria-selected:bg-gray-100 group">
                    <svg class="w-6 h-6 text-gray-500 transition duration-75 group-hover:text-gray-900"
                         xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64" stroke-width="3" stroke="currentColor"
                         fill="none">
                        <path d="M17.94,54.81a.1.1,0,0,1-.14,0c-1-1.11-11.69-13.23-11.69-21.26,0-9.94,6.5-12.24,11.76-12.24,4.84,0,11.06,2.6,11.06,12.24C28.93,41.84,18.87,53.72,17.94,54.81Z"></path>
                        <circle cx="17.52" cy="31.38" r="4.75"></circle>
                        <path d="M49.58,34.77a.11.11,0,0,1-.15,0c-.87-1-9.19-10.45-9.19-16.74,0-7.84,5.12-9.65,9.27-9.65,3.81,0,8.71,2,8.71,9.65C58.22,24.52,50.4,33.81,49.58,34.77Z"></path>
                        <circle cx="49.23" cy="17.32" r="3.75"></circle>
                        <path d="M17.87,54.89a28.73,28.73,0,0,0,3.9.89"></path>
                        <path d="M24.68,56.07c2.79.12,5.85-.28,7.9-2.08,5.8-5.09,2.89-11.25,6.75-14.71a16.72,16.72,0,0,1,4.93-3"
                              stroke-dasharray="7.8 2.92"></path>
                        <path d="M45.63,35.8a23,23,0,0,1,3.88-.95"></path>
                    </svg>
                    <span class="ml-3">Challenge 2024</span>
                </a>
            </li>
        </ul>
    </div>
    <div class="absolute flex flex-col justify-center bottom-0 left-0 w-full bg-white z-20">
        <div class="py-2 px-4 text-xs text-center text-gray-500">
            Last updated on <span class="last-update">loading...</span>
        </div>
    </div>
</aside>
<main class="md:ml-64 p-4 h-auto min-h-screen pt-20 text-gray-900">
    <div id="anchor-challenge-2025" class="w-full p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-xs">
        <h2 class="text-lg font-semibold mb-4">Challenge 2025 - We zijn der nog nie &#129402;</h2>
        <div class="flex items-center gap-x-2">
            <svg viewBox="0 0 1024 1024" class="w-[50px]" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M897.9 369.2H205c-33.8 0-61.4-27.6-61.4-61.4s27.6-61.4 61.4-61.4h692.9c33.8 0 61.4 27.6 61.4 61.4s-27.6 61.4-61.4 61.4z"
                          fill="#FFB89A"></path>
                    <path d="M807 171H703.3c-16.6 0-30 13.4-30 30s13.4 30 30 30H807c31.6 0 57.4 24 57.4 53.4v42.3H125.2v-42.3c0-29.5 25.7-53.4 57.4-53.4H293c16.6 0 30-13.4 30-30s-13.4-30-30-30H182.5c-64.7 0-117.4 50.9-117.4 113.4v527.7c0 62.5 52.7 113.4 117.4 113.4H807c64.7 0 117.4-50.9 117.4-113.4V284.5c0-62.6-52.7-113.5-117.4-113.5z m0 694.6H182.5c-31.6 0-57.4-24-57.4-53.4V386.8h739.2v425.4c0.1 29.5-25.7 53.4-57.3 53.4z"
                          fill="#45484C"></path>
                    <path d="M447.6 217.1c-12.4-6.1-27-2.8-35.7 7.1-2.2-6.7-4-16.2-4-28.1 0-13 2.2-23 4.6-29.8 9.5 8.1 23.5 9.6 34.9 2.8 14.2-8.5 18.8-27 10.3-41.2-15.5-25.9-35.9-29.7-46.6-29.7-36.6 0-63.1 41.2-63.1 97.8s26.4 98 63 98c20.6 0 39-13.4 50.4-36.7 7.3-14.9 1.1-32.9-13.8-40.2zM635.9 218.5c-12.4-6.1-27-2.8-35.7 7.1-2.2-6.7-4-16.2-4-28.1 0-13 2.2-23 4.6-29.8 9.5 8.1 23.5 9.6 34.9 2.8 14.2-8.5 18.8-27 10.3-41.2-15.5-25.9-35.9-29.7-46.6-29.7-36.6 0-63.1 41.2-63.1 97.8s26.5 97.8 63.1 97.8c20.6 0 39-13.4 50.4-36.7 7.1-14.7 0.9-32.7-13.9-40z"
                          fill="#45484C"></path>
                    <path d="M700.2 514.5H200.5c-16.6 0-30 13.4-30 30s13.4 30 30 30h499.7c16.6 0 30-13.4 30-30s-13.5-30-30-30zM668.4 689.8h-74c-16.6 0-30 13.4-30 30s13.4 30 30 30h74c16.6 0 30-13.4 30-30s-13.4-30-30-30zM479.3 689.8H200.5c-16.6 0-30 13.4-30 30s13.4 30 30 30h278.8c16.6 0 30-13.4 30-30s-13.4-30-30-30z"
                          fill="#33CC99"></path>
                </g>
            </svg>
            <span>Dagen ver in 2025: <strong class="day-of-the-year">...</strong></span>
        </div>
        <div class="flex items-center gap-x-2">
            <svg viewBox="0 0 1024 1024" class="w-[50px]" xmlns="http://www.w3.org/2000/svg" fill="#000000">
                <g id="SVGRepo_bgCarrier" stroke-width="0"></g>
                <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>
                <g id="SVGRepo_iconCarrier">
                    <path d="M840.5 798.2L662.3 599.5l-151 173.7-173.7-173.7-167.7 201c-21 30.4 0.9 71.8 37.9 71.6l594.7-3.3c36.2-0.1 57.8-40.3 38-70.6z"
                          fill="#FFB89A"></path>
                    <path d="M741.6 647.3l-52.3-47.7c-12.2-11.2-31.2-10.3-42.4 1.9s-10.3 31.2 1.9 42.4l52.3 47.7c5.8 5.3 13 7.8 20.2 7.8 8.1 0 16.2-3.3 22.2-9.8 11.2-12.1 10.3-31.1-1.9-42.3zM631.2 546.5c-12.4-11-31.4-9.8-42.3 2.6l-98.8 111.7-171-165.7L87.9 724.7c-11.8 11.7-11.8 30.7-0.1 42.4 5.9 5.9 13.6 8.9 21.3 8.9 7.6 0 15.3-2.9 21.1-8.7l189.4-188.1 173.8 168.5L633.8 589c11-12.5 9.8-31.5-2.6-42.5z"
                          fill="#33CC99"></path>
                    <path d="M721.3 342.8m-35.1 0a35.1 35.1 0 1 0 70.2 0 35.1 35.1 0 1 0-70.2 0Z" fill="#33CC99"></path>
                    <path d="M743.2 175.1H191.6c-70.6 0-128.3 57.7-128.3 128.3v499.2c0 70.6 57.7 128.3 128.3 128.3h551.5c70.6 0 128.3-57.7 128.3-128.3V303.5c0.1-70.6-57.7-128.4-128.2-128.4z m68.3 627.6c0 18.1-7.1 35.2-20.1 48.2-13 13-30.1 20.1-48.2 20.1H191.6c-18.1 0-35.2-7.1-48.2-20.1-13-13-20.1-30.1-20.1-48.2V303.5c0-18.1 7.1-35.2 20.1-48.2 13-13 30.1-20.1 48.2-20.1h551.5c18.1 0 35.2 7.1 48.2 20.1 13 13 20.1 30.1 20.1 48.2v499.2z"
                          fill="#45484C"></path>
                    <path d="M799.7 90.9H237.2c-16.6 0-30 13.4-30 30s13.4 30 30 30h562.4c26.1 0 50.8 10.3 69.4 28.9 18.6 18.6 28.9 43.3 28.9 69.4v482.4c0 16.6 13.4 30 30 30s30-13.4 30-30V249.2C958 161.9 887 90.9 799.7 90.9z"
                          fill="#45484C"></path>
                </g>
            </svg>
            <span>Target vandaag: <strong class="todays-target">...</strong></span>
        </div>
        <div class="grid grid-cols-1 gap-4 mt-4">
            <div class="overflow-x-auto">
                <div class="challenge-2025-overall-chart w-full min-w-[800px] h-[400px] text-sm flex items-center justify-center">
                    Loading...
                </div>
            </div>
            <div class="overflow-x-auto">
                <div class="challenge-2025-monthly-chart w-full min-w-[800px] h-[400px] text-sm flex items-center justify-center">
                    Loading...
                </div>
            </div>
        </div>
    </div>
    <div id="anchor-challenge-2025-personal"
         class="w-full p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-xs">
        <h2 class="text-lg font-semibold mb-4">Personal challenges 2025 - Amaikes &#127947</h2>
        <div class="overflow-x-auto">
            <ul class="min-w-[1100px] space-y-1 list-inside">
                <li class="flex items-center">
                    <svg class="w-3.5 h-3.5 me-2 text-gray-400 shrink-0" aria-hidden="true"
                         xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
                    </svg>
                    <div>BBorghma <span class="text-sm">– Zwemactiviteit van 5 km 🌊</span></div>
                </li>
                <li class="flex items-center">
                    <svg class="w-3.5 h-3.5 me-2 text-gray-400 shrink-0" aria-hidden="true"
                         xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
                    </svg>
                    <div>Jean the Herniator <span class="text-sm">– Wandelactiviteit waarbij je een wegwijzerbordje 🪧 van de Kortrijk Triathlon 🏃‍♂️🏊‍♂️🚴 (15.06.2025) ontvreemdt 😈 en bezorgt aan uw captain 🏴‍☠</span>️
                    </div>
                </li>
                <li class="flex items-center">
                    <svg class="w-3.5 h-3.5 me-2 text-gray-400 shrink-0" aria-hidden="true"
                         xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
                    </svg>
                    <div>KDL Tuinen <span class="text-sm">– Loopactiviteit van 30 km 👟🔥</span></div>
                </li>
                <li class="flex items-center">
                    <svg class="w-3.5 h-3.5 me-2 text-green-600 shrink-0" aria-hidden="true"
                         xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
                    </svg>
                    <div>Robinho <span class="text-sm">– Fietsactiviteit van 200 km 🚴💨</span></div>
                </li>
                <li class="flex items-center">
                    <svg class="w-3.5 h-3.5 me-2 text-green-600 shrink-0" aria-hidden="true"
                         xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
                    </svg>
                    <div>Ruub platten tuub <span class="text-sm">– Lierneux afvinken ✅</span></div>
                </li>
                <li class="flex items-center">
                    <svg class="w-3.5 h-3.5 me-2 text-gray-400 shrink-0" aria-hidden="true"
                         xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
                    </svg>
                    <div>Lube-n-go Tibo <span class="text-sm">– Fietsactiviteit van 60 km 🛞💨</span></div>
                </li>
                <li class="flex items-center">
                    <svg class="w-3.5 h-3.5 me-2 text-gray-400 shrink-0" aria-hidden="true"
                         xmlns="http://www.w3.org/2000/svg" fill="currentColor" viewBox="0 0 20 20">
                        <path d="M10 .5a9.5 9.5 0 1 0 9.5 9.5A9.51 9.51 0 0 0 10 .5Zm3.707 8.207-4 4a1 1 0 0 1-1.414 0l-2-2a1 1 0 0 1 1.414-1.414L9 10.586l3.293-3.293a1 1 0 0 1 1.414 1.414Z"/>
                    </svg>
                    <div>KOMandeur Deleye <span class="text-sm">– ???</span></div>
                </li>
            </ul>
        </div>
    </div>
    <div id="anchor-challenge-2024" class="p-4 mb-4 bg-white border border-gray-200 rounded-lg shadow-xs">
        <h2 class="text-lg font-semibold mb-4">Challenge 2024 - We zijn der &#129395;</h2>
        <div class="overflow-x-auto">
            <div class="challenge-2024-chart w-full min-w-[800px] h-[400px] text-sm flex items-center justify-center">
                Loading...
            </div>
        </div>
    </div>
</main>
<script src="/js/public-google-sheets-parser@latest.js"></script>
<script src="/js/echarts.min.js"></script>
<script src="/js/flowbite.js"></script>
<script>
    const charts = [];
    const spreadsheetId = '1KSP-WQZOKonBoQJ5Ye16wstMFdXA9BW_goE8Qcx1ERg';

    const timeToDecimal = (t) => {
        const arr = t.split(':');
        const dec = parseInt((arr[1] / 6) * 10, 10);

        return parseFloat(parseInt(arr[0], 10) + '.' + (dec < 10 ? '0' : '') + dec);
    }

    const render2025Challenge = (colors) => {
        const now = new Date();
        const start = new Date(now.getFullYear(), 0, 0);
        const diff = (now - start) + ((start.getTimezoneOffset() - now.getTimezoneOffset()) * 60 * 1000);
        const oneDay = 1000 * 60 * 60 * 24;
        const day = Math.floor(diff / oneDay);

        document.querySelector('.day-of-the-year').innerText = day;
        document.querySelector('.todays-target').innerText = (2500 / 365 * day).toFixed(1) + 'h';

        const parser = new PublicGoogleSheetsParser(spreadsheetId, {
            sheetName: '2025',
            useFormat: true
        });

        parser.parse().then(data => {
            const chart2025Overall = echarts.init(document.querySelector('.challenge-2025-overall-chart'));
            const seriesOverall = [];

            Object.keys(data[0]).filter(key => !key.includes('Month') && !key.includes('month') && !key.includes('%') && !key.includes('#') && !key.includes('Delta')).forEach(seriesName => {
                const isGoalSeries = seriesName === 'Goal';
                seriesOverall.push({
                    name: seriesName,
                    type: 'line',
                    itemStyle: {
                        color: colors[seriesName],
                    },
                    label: {
                        show: isGoalSeries,
                        distance: 10,
                        formatter: (params) => {
                            const completed = timeToDecimal(data[params.dataIndex]['Completed']);
                            if (completed <= 0) {
                                return '';
                            }

                            const delta = data[params.dataIndex]['Delta'];
                            const deltaIsPositive = timeToDecimal(delta) >= 0;
                            return '{' + (deltaIsPositive ? 'green' : 'red') + '|' + delta + 'h}';
                        },
                        rich: {
                            red: {
                                color: '#FFFFFF',
                                backgroundColor: '#EE6766',
                                padding: 5,
                                borderRadius: 5,
                            },
                            green: {
                                color: '#FFFFFF',
                                backgroundColor: '#3AA272',
                                padding: 5,
                                borderRadius: 5,
                            },
                        }
                    },
                    data: data.map(item => {
                        const timeInDecimal = item[seriesName] ? timeToDecimal(item[seriesName]) : null;
                        return timeInDecimal > 0 ? timeInDecimal : null
                    })
                });
            });

            chart2025Overall.setOption({
                title: {
                    text: 'Summary',
                },
                grid: {
                    containLabel: true,
                    top: '10%',
                    bottom: '2%',
                    left: '0%',
                    right: '170px',
                },
                tooltip: {
                    trigger: 'axis',
                    valueFormatter: (value) => value ? value + 'h' : null,
                    confine: true
                },
                legend: {
                    orient: 'vertical',
                    right: 'right',
                },
                xAxis: {
                    data: data.map(item => item['Month']),
                    axisTick: {
                        show: false
                    }
                },
                yAxis: {
                    axisLabel: {
                        formatter: function (value, index) {
                            return value + 'h';
                        }
                    }
                },
                series: seriesOverall
            });
            charts.push(chart2025Overall);

            const seriesMonthly = [];
            const chart2025monthly = echarts.init(document.querySelector('.challenge-2025-monthly-chart'));
            Object.keys(data[0]).filter(key => key.includes('/ month')).forEach(seriesName => {
                const seriesLabel = seriesName.replace(' / month', '');
                const isGoalSeries = seriesLabel === 'Goal';

                seriesMonthly.push({
                    name: seriesLabel,
                    type: isGoalSeries ? 'line' : 'bar',
                    stack: isGoalSeries ? null : 'total',
                    label: {
                        show: isGoalSeries,
                        distance: 5,
                        formatter: (params) => {
                            const percentageCompleted = data[params.dataIndex]['Completed month %'].replace('%', '');
                            if (percentageCompleted <= 0) {
                                return '';
                            }

                            const delta = (percentageCompleted - 100);
                            return '{' + (delta >= 0 ? 'green' : 'red') + '|' + data[params.dataIndex]['Delta month'] + 'h}';
                        },
                        rich: {
                            red: {
                                color: '#FFFFFF',
                                backgroundColor: '#EE6766',
                                padding: 5,
                                borderRadius: 5,
                            },
                            green: {
                                color: '#FFFFFF',
                                backgroundColor: '#3AA272',
                                padding: 5,
                                borderRadius: 5,
                            },
                        }
                    },
                    data: data.map(item => {
                        const timeInDecimal = item[seriesName] ? timeToDecimal(item[seriesName]) : null;
                        return timeInDecimal > 0 ? timeInDecimal : null
                    }),
                    itemStyle: {
                        color: colors[seriesLabel],
                    },
                });
            });

            chart2025monthly.setOption({
                title: {
                    text: 'Monthly stats',
                },
                grid: {
                    containLabel: true,
                    top: '10%',
                    bottom: '2%',
                    left: '0%',
                    right: '170px',
                },
                tooltip: {
                    trigger: 'axis',
                    valueFormatter: (value) => value ? value + 'h' : null,
                    confine: true
                },
                legend: {
                    orient: 'vertical',
                    right: 'right',

                },
                xAxis: {
                    data: data.map(item => item['Month']),
                    axisTick: {
                        show: false
                    }
                },
                yAxis: {
                    axisLabel: {
                        formatter: function (value, index) {
                            return value + 'h';
                        }
                    }
                },
                series: seriesMonthly
            });

            charts.push(chart2025monthly);
        });
    };

    const render2024Challenge = (colors) => {
        const parser = new PublicGoogleSheetsParser(spreadsheetId, {
            sheetName: '2024',
            useFormat: true
        });

        parser.parse().then(data => {
            const chart2024 = echarts.init(document.querySelector('.challenge-2024-chart'));
            const series = [];

            Object.keys(data[0]).filter(key => key !== 'Month').forEach(seriesName => {
                series.push({
                    name: seriesName,
                    type: 'line',
                    data: data.map(item => item[seriesName]),
                    itemStyle: {
                        color: colors[seriesName],
                    },
                });
            });
            chart2024.setOption({
                grid: {
                    containLabel: true,
                    top: '3%',
                    bottom: '2%',
                    left: '0%',
                    right: '170px',
                },
                tooltip: {
                    trigger: 'axis',
                    valueFormatter: (value) => value + 'km',
                    confine: true
                },
                legend: {
                    orient: 'vertical',
                    right: 'right',
                },
                xAxis: {
                    data: data.map(item => item['Month']),
                    axisTick: {
                        show: false
                    }
                },
                yAxis: {
                    axisLabel: {
                        formatter: function (value, index) {
                            return value + 'km';
                        }
                    }
                },
                series: series
            });
            charts.push(chart2024);
        });
    };

    const parser = new PublicGoogleSheetsParser(spreadsheetId, {
        sheetName: 'Misc',
        useFormat: true
    });

    parser.parse().then(misc => {
        const formattedColors = [];

        misc.forEach(row => {
            formattedColors[row['Wat']] = row['Value'];
        });

        document.querySelector('.last-update').innerText = misc.filter(row => row['Wat'] === 'Laatste update')[0]['Value'];

        render2025Challenge(formattedColors);
        render2024Challenge(formattedColors);
    });

    window.addEventListener('resize', function () {
        charts.forEach(chart => chart.resize());
    });

    const menu = document.querySelector('aside');
    const mobileNavTriggerEl = document.querySelector('[data-drawer-target="drawer-navigation"]');

    document.querySelectorAll('aside a').forEach($menuLink => {
        $menuLink.addEventListener('click', () => {
            if (!menu.hasAttribute('aria-hidden')) {
                // Trigger click event to close mobile nav.
                mobileNavTriggerEl.dispatchEvent(
                    new MouseEvent('click', {
                        bubbles: true,
                        cancelable: true,
                        view: window
                    })
                );
            }
        });
    });
</script>
</body>
</html>